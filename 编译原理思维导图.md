# 编译原理

## 概述

### 语言处理器

- 编译器

  进行翻译工作
	- 词法分析

	  词法分析器读入组成源程序的字符流，并且将他们组织成有意义的词素序列，对于每个词素（lexeme），词法分析器产生词法单元（token）输出
	- 语法分析

	  由产生的词法单元生成语法树
	- 语义分析

	  使用语法树和符号表中的信息来检查源程序是否和语言定义的语义一致，同时收集类型信息，并把信息存放在语法树或符号表中。
	- 中间代码生成

	  把源程序翻译成目标代码，一个便难以企可能会构造出一个或多个中间表示
	- 机器无关代码优化

	- 代码生成

	  输入中间表示形式，映射到目标语言
	- 机器相关代码优化

- 解释器

  直接执行语句
## 词法分析

### 作用

读入源程序字符流、组成词素，输出词法单元序列。
过滤空白、换行、制表符、注释等。
将词素添加到符号表中。
实现时通常和语法分析器处于同一趟中。
### 名词解释

- 词法单元

  <词法单元名、属性值（可选）>
  词法单元名说明词法单位的类型，当该类型词法单元实例不唯一时，使用属性值进一步加以区分。语法分析器通过词法单元名即可确定词法单元序列的结构。
- 模式

  描述了一个词法单元的词素可能具有的形式
  关键词的模式就是组成该关键字的字符序列
- 词素

  源程序中跟某个词法单元模式相匹配的字符序列
  被词法分析器识别为该词法单元的一个实例
### 词法单元的归约

- 串和语言

	- 字母表

		- 有限的符号集合

	- 串

		- 定义

		  买某个字母表上的一个串是该字母表中符号的一个有穷序列。串的长度通常被记为s。
		  
		  长度为0的串被称为空串，记为ε
		- 串的计算

			- 串的前缀

			  从尾部删除0个或多个符号后得到的串
			- 串的后缀

			  从头部删除0个或多个符号后得到的串
			- 串的子串

			  删除某个前缀和某个后缀后得到的串
			- 串的真前缀、真后缀、真子串

			  既不等于ε，也不等于前缀、后缀、子串本身
			- 串的子序列

			  从s中删除0个或多个符号后得到的串，符号不必相邻
			- 串的连接

			  x=dog  y=cat
			  xy=dogcat
			- 串的乘积

			  s¹=s    
			  s²=ss   
			  s³=sss
	- 语言

		- 定义

		  语言式某个给定字母表上任意可数的串集合
		- 语言的运算

			- L和M的并

			- L和M的连接

			- L和M的Kleene闭包

			- L的正闭包

			  不包括Lº，也就是说如果L中不包含ε时，L的正闭包必不包含ε
- [正则表达式](https://blog.csdn.net/qq_40294512/article/details/89003655)

	- 定义

	  用于描述一种语言。例如用letter代表任意字母，digit代表数位等
	  正则表达式可以由较小的正则表达式按照规则递归构建，每个正则表达式r表示一个语言L(r)，其中有如下规则：
	  ε是一个正则表达式，L(ε)={ε}，即改语言只包含空串
	  如果a是Σ上的一个符号，那么a是一个正则表达式，并且L(a) = {a}
	- 运算

	  (r) | (s)是一个正则表达式，表示语言L(r) ∪ L(s)
	  
	  (r) (s)是一个正则表达式，表示语言L(r) L(s)
	  
	  (r)*是一个正则表达式，表示语言L(r)*
	  
	  (r)是一个正则表达式，表示语言L(r)
		- 或

		  交换律、结合律
		- 连接

		  交换律、分配律
		- 闭包

		  闭包中一定包含ε、幂等性
	- 拓展

	  一个或多个实例r+
	  零个或一个实例r？
- 词法单元的识别

	- 状态转换图

		- 状态

			- 开始状态

			- 接收状态

			- 普通状态

		- 边

- 有穷自动机

  是一种识别器，对输入的串回答yes or no，分为两类，这两种自动机是别的语言集合相同，都是正则语言。
	- [不确定的有穷自动机（NFA）](https://blog.csdn.net/qq_40294512/article/details/89004777)

		- 定义

		  对其边上的标号没有限制，一个符号标记离开同一状态多条边，并且空串也可以作为标号
		- 组成

		  五元组 M=(S, Σ, aδ, S0, F)
			- 有穷状态集合S

			- 输入符号集合Σ

			- 转换函数

			- 开始状态

			- 接收状态集合

	- [确定的有穷自动机（DFA）](https://blog.csdn.net/qq_40294512/article/details/89004777)

		- 定义

		  对于每个状态及自动机输入字母表中的每个符号，有且只有一条离开该状态，以改符号为标号的边
		- 组成

	- [最简DFA](https://blog.csdn.net/qq_40294512/article/details/89004777)

## 语法分析

### 作用

语法分析器从词法分析器获得一个由词法单元组成的串，并验证这个串可以由源语言的文法生成。
### 分类

- 通用型（低效、不使用）

- 自顶向下

  代表文法：LL文法
- 自底向上

  代表文法：LR文法
### 程序错误

- 词法错误

- 语法错误

- 语义错误

- 逻辑错误

### 语法错误的处理

- 恐慌模式的恢复

  一旦发现错误就不断丢弃输入中的符号，一次丢弃一个，直到找到同步词法单元集合中的元素为止。
- 短语层次的恢复

  在余下的输入上进行局部性纠正
- 错误产生式

- 全局纠错

### 上下文无关文法

- 定义

	- 终结符号

	  终结符号是组成串的基本符号。例如特殊符号等等
	- 非终结符号

	  非终结符号是组成串的集合的语法变量。非终结符号给出了语言的层次结构
	- 开始符号

	  开始符号表示的串集合就是这个文法的生成语言。
	- 一组产生式

	  描述了将终结符号和非终结符号组合成串的方法。每个产生式由以下几个元素构成：
	  一个被称为产生式头/左部的非终结符号
	  符号->
	  一个由零个或多个终结符或非终结符组成的产生式体/右部
- [推导](https://blog.csdn.net/qq_40294512/article/details/89363560)

  从开始符号出发，每个重写步骤把一个非终结符替换为它的某个产生式体
	- 最左推导

	- 最右推导

- 句子/句型/语言

  如果S=>a，其中S是文法G的开始符号，我们就说a是G的一个句型。
  
  句子是不包含非终结符号的句型。
  
  语言式一个文法所有句子的集合。
- 二义性

	- 定义

	  如果一个文法可以为某个句子生成多个语法分析树，那么就说他是二义性的。
	- 产生原因：就近匹配原则

- 每个正则语言都是一个上下文无关语言，反之不成立

- 消除左递归

- 提取左公因子

### [自顶向下的语法分析](https://blog.csdn.net/qq_40294512/article/details/89397905)

- 定义

  自顶向下的语法分析可以被看做是为输入串构造语法分析树的问题
  也可以被看做是寻找输入串的最左推导的问题
- 方法:递归下降的语法分析

- 工具

	- FIRST集合

	- FOLLOW集合

- LL（1）文法

  从左向右扫描输入，产生最左推导，每步只需要向前看一个输入符号的语法分析动作
	- 条件

	  不存在终结符号a使得α和β都能够推导出以a开头的串
	  α和β中最多有一个可以推导出空串
	  如果β=》ε，那么α不能推导出任何以FOLLOW（A）中某个终结符号开头的串。
	- 流程

	  处理左递归
	  提取左公因子
	  求FIRST和FOLLOW集合
	  构建预测分析表
### 自底向上的语法分析

- 框架：移入-归约

- [移入归约分析技术](https://blog.csdn.net/qq_40294512/article/details/92621101)

  使用一个栈来保存文法符号，并使用一个缓冲区来存放需要进行语法分析的其他符号。
	- 动作

		- 移入

		- 归约

		- 接受

		- 报错

	- 冲突

		- 移入/归约冲突

		  存在移入动作。归约动作的判断问题
		- 归约/归约冲突

		  存在多个归约动作
- LR技术

  从左向右扫描，最右推导序列的技术
	- 表格驱动

	- 无回溯移入-归约技术

- [LR（0）自动机](https://blog.csdn.net/qq_40294512/article/details/92621241)

	- 项

		- 归约项目

		- 接收项目

		- 移进项目

		- 待约项目

	- 一个文法：增广文法

	- 两个函数：CLOSURE 和 GOTO

- [SLR语法分析表](https://blog.csdn.net/qq_40294512/article/details/92621351)

- LR（1）项集

- LALR方法

## 重点算法

### 词法分析

- 正则生成NFA

- NFA转DFA

- DFA简化

### 语法分析

- 消除左递归

- 提取左公因子

- FIRST集合和FOLLOW集合

- LL（1）预测分析表构建

